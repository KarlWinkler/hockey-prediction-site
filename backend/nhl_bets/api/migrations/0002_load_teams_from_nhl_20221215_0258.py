# Generated by Django 4.0.6 on 2022-12-15 02:58

from django.db import migrations
import requests


def load_teams(apps, schema_editor):
    Team = apps.get_model('api', 'Team')
    
    for team in get_teams():
      Team.objects.create(
        name=team['name'],
        abbreviation=team['abbreviation'],
        nhl_id=team['id']
      )

def get_teams():
    response = requests.get('https://statsapi.web.nhl.com/api/v1/teams')
    return response.json()['teams']

class Migration(migrations.Migration):
    dependencies = [
        ('api', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(load_teams),
    ]
