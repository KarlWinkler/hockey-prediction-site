# Generated by Django 4.0.6 on 2022-12-15 03:16

from django.db import migrations
import requests


def update(apps, schema_editor):
    Team = apps.get_model('api', 'Team')
    
    for team in get_teams():
      Team.objects.filter(nhl_id=team['id']).update(official_site_url=team['officialSiteUrl'])

def get_teams():
    response = requests.get('https://statsapi.web.nhl.com/api/v1/teams')
    return response.json()['teams']

class Migration(migrations.Migration):

    dependencies = [
        ('api', '0003_team_official_site_url'),
    ]

    operations = [
        migrations.RunPython(update),
    ]
